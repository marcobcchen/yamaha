"use strict";$((function(){var e=!0,a=0,t=0,o=null,l=null,i=$(".map"),s=$(".city");function n(){o=localStorage.getItem("bikeType"),l=localStorage.getItem("bikeColor");for(var a=1;a<=9;a++){var t=$(".bike-road-"+a).data("path");$(".bike-road-"+a+" img").attr("src","images/bike_".concat(o,"_").concat(l,"_").concat(t,".png"))}var i,s;console.log("重設車款：".concat(o,", 車色：").concat(l)),e&&(e=!1,i=.6,(s=new TimelineMax).to($(".bike-road-1"),.5,{y:0,alpha:1,ease:Bounce.easeOut,delay:2}),s.to($(".bike-road-1"),1*i,{left:"42.6%",top:"69.6%",ease:Linear.easeNone}),s.to($(".bike-road-1"),0,{alpha:0}),s.addLabel("restart"),s.to($(".bike-road-2"),0,{alpha:1}),s.to($(".bike-road-2"),7*i,{left:"61.6%",top:"46.6%",ease:Linear.easeNone}),s.to($(".bike-road-2"),0,{alpha:0}),s.to($(".bike-road-3"),0,{alpha:1}),s.to($(".bike-road-3"),2.5*i,{left:"55.5%",top:"38%",ease:Linear.easeNone}),s.to($(".bike-road-3"),0,{alpha:0}),s.to($(".bike-road-4"),0,{alpha:1}),s.to($(".bike-road-4"),2.5*i,{left:"61.8%",top:"29.2%",ease:Linear.easeNone}),s.to($(".bike-road-4"),0,{alpha:0}),s.to($(".bike-road-5"),0,{alpha:1}),s.to($(".bike-road-5"),1*i,{left:"60%",top:"26%",ease:Linear.easeNone}),s.to($(".bike-road-5"),0,{alpha:0}),s.to($(".bike-road-6"),0,{alpha:1}),s.to($(".bike-road-6"),2.5*i,{left:"52.8%",top:"34%",ease:Linear.easeNone}),s.to($(".bike-road-6"),0,{alpha:0}),s.to($(".bike-road-7"),0,{alpha:1}),s.to($(".bike-road-7"),1*i,{left:"49.8%",top:"31%",ease:Linear.easeNone}),s.to($(".bike-road-7"),0,{alpha:0}),s.to($(".bike-road-8"),0,{alpha:1}),s.to($(".bike-road-8"),7*i,{left:"30.9%",top:"53.9%",ease:Linear.easeNone}),s.to($(".bike-road-8"),0,{alpha:0}),s.to($(".bike-road-9"),0,{alpha:1}),s.to($(".bike-road-9"),5*i,{left:"42.6%",top:"69.6%",ease:Linear.easeNone}),s.to($(".bike-road-9"),0,{alpha:0}),s.addCallback((function(){s.seek("restart").play()})))}function c(){$(".select-bike .step-1 li").removeClass("active"),$(".select-bike .step-2 li").removeClass("active"),$(".select-bike .step-1").css("display","flex"),$(".select-bike .step-2").css("display","none"),$(".select-bike .step-2 ul").css("display","none"),TweenMax.set($(".select-bike .select-container"),{scale:.5,autoAlpha:0}),TweenMax.to($(".select-bike .select-container"),.5,{scale:1,autoAlpha:1,ease:Back.easeOut,delay:.4}),TweenMax.to($(".select-bike"),.3,{autoAlpha:1,delay:.1})}function r(){a=$(window).innerWidth(),t=$(window).innerHeight();var e=2.15*$(".ratio-container").innerHeight();$(".ratio-container").css({width:e}),function(){var e=a,o=t-(a<992?40:80),l=.5*(e-s.innerWidth()),n=.5*(o-s.innerHeight());i.stop().scrollTo({top:"50%",left:"50%"},800),e>s.innerWidth()?s.css({left:l}):s.css({left:"auto"});o>s.innerHeight()?s.css({top:n}):s.css({top:"auto"})}()}$(window).on("resize",r),r(),o=localStorage.getItem("bikeType"),l=localStorage.getItem("bikeColor"),console.log("車款：",o),console.log("車色：",l),o&&l?n():(console.log("open select bike"),c()),function(){function e(){$(".menu").toggleClass("open"),$("nav").toggleClass("open")}$(".menu").on("click",(function(a){a.preventDefault(),e()})),$(".logo").on("click",(function(e){e.preventDefault(),localStorage.clear()})),$(".btn-change-color").on("click",(function(a){a.preventDefault(),e(),c()}))}(),$(".select-bike .step-1 li").on("click",(function(){$(".select-bike .step-1 li").removeClass("active"),$(this).addClass("active")})),$(".select-bike .step-2 li").on("click",(function(){$(".select-bike .step-2 li").removeClass("active"),$(this).addClass("active")})),$(".select-bike .step-1 a").on("click",(function(e){e.preventDefault();var a=$(".select-bike .step-1").find(".active").index();localStorage.setItem("bikeType",a),a<0?alert("請選擇您的愛車！"):($(".select-bike .step-1").css("display","none"),$(".select-bike .step-2").css("display","flex"),$(".select-bike .talk-1").css("display","none"),$(".select-bike .talk-2").css("display","block"),0==a?$(".select-bike .step-2 .color-1").css("display","flex"):$(".select-bike .step-2 .color-2").css("display","flex"))})),$(".select-bike .step-2 a").on("click",(function(e){e.preventDefault();var a=$(".select-bike .step-2").find(".active").index();localStorage.setItem("bikeColor",a),a<0?alert("請選擇愛車顏色！"):(TweenMax.to($(".select-bike .select-container"),.5,{scale:.5,autoAlpha:0,ease:Back.easeIn}),TweenMax.to($(".select-bike"),.3,{autoAlpha:0,delay:.3})),n()})),TweenMax.set($(".bike-road-1"),{left:"40.6%",top:"67%",y:-10,alpha:0}),TweenMax.set($(".bike-road-2"),{alpha:0}),TweenMax.set($(".bike-road-3"),{alpha:0}),TweenMax.set($(".bike-road-4"),{alpha:0}),TweenMax.set($(".bike-road-5"),{alpha:0}),TweenMax.set($(".bike-road-6"),{alpha:0}),TweenMax.set($(".bike-road-7"),{alpha:0}),TweenMax.set($(".bike-road-8"),{alpha:0}),TweenMax.set($(".bike-road-9"),{alpha:0})}));